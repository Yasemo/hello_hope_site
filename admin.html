<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Admin Dashboard - Hello Hope Canada">
  <meta name="author" content="Hello Hope Canada">

  <title>Admin Dashboard - Hello Hope Canada</title>

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1497149528035279');
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1497149528035279&ev=PageView&noscript=1" />
  </noscript>
  <!-- End Meta Pixel Code -->

  <!-- Preload critical resources -->
  <link rel="preload" href="styles/main.css" as="style">
  <link rel="preload" href="scripts/main.js" as="script">

  <!-- Preload Minion Pro fonts -->
  <link rel="preload" href="fonts/minion_variable_woff/MinionPro-Regular.woff" as="font" type="font/woff" crossorigin>
  <link rel="preload" href="fonts/minion_variable_woff/MinionPro-Bold.woff" as="font" type="font/woff" crossorigin>

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="logos/red/red_Red 36x36.png">
  <link rel="icon" type="image/png" sizes="16x16" href="logos/red/red_Red 24x24.png">
  <link rel="apple-touch-icon" sizes="180x180" href="logos/red/red_Red 180x180.png">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="styles/reset.css">
  <link rel="stylesheet" href="styles/variables.css">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/admin.css">

  <!-- Markdown and Code Highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css">
  <script src="https://cdn.jsdelivr.net/npm/marked@13.0.3/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

  <!-- Toast UI Editor -->
  <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css">
  <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
</head>
<body>
  <!-- Login Screen -->
  <div id="login-screen" class="login-screen">
    <div class="login-container">
      <div class="login-header">
        <img src="logos/red/red_Red 96x96.png" alt="Hello Hope Canada Logo" class="login-logo">
        <h1>Admin Dashboard</h1>
        <p>Hello Hope Canada</p>
      </div>

      <form id="login-form" class="login-form">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" required>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" required>
        </div>

        <button type="submit" class="login-btn">Sign In</button>
      </form>

      <div id="login-error" class="login-error" style="display: none;"></div>
    </div>
  </div>

  <!-- Admin Dashboard -->
  <div id="admin-dashboard" class="admin-dashboard" style="display: none;">
    <!-- Admin Header -->
    <header class="admin-header">
      <div class="admin-header-content">
        <div class="admin-brand">
          <img src="logos/red/red_Red 36x36.png" alt="Hello Hope Canada Logo">
          <span>Admin Dashboard</span>
        </div>
        <div class="admin-actions">
          <a href="/articles" class="view-site-btn">View Site</a>
          <button id="logout-btn" class="logout-btn">Logout</button>
        </div>
      </div>
    </header>

    <!-- Admin Navigation -->
    <nav class="admin-nav">
      <div class="admin-nav-content">
        <ul class="nav-list">
          <li><a href="#posts" class="nav-link active" data-section="posts">Blog Posts</a></li>
          <li><a href="#discounts" class="nav-link" data-section="discounts">Discount Codes</a></li>
        </ul>
      </div>
    </nav>

    <!-- Admin Content -->
    <main class="admin-content">
      <!-- Posts List -->
      <div id="posts-list-view" class="posts-list-view section-view" data-section="posts">
        <div class="posts-header">
          <h2>All Posts</h2>
          <button id="new-post-btn" class="new-post-btn">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
            </svg>
            New Post
          </button>
        </div>

        <div id="posts-loading" class="posts-loading">
          <div class="loading-spinner"></div>
          <p>Loading posts...</p>
        </div>

        <div id="posts-table" class="posts-table" style="display: none;">
          <div class="table-header">
            <div class="col-title">Title</div>
            <div class="col-author">Author</div>
            <div class="col-date">Date</div>
            <div class="col-status">Status</div>
            <div class="col-actions">Actions</div>
          </div>
          <div id="posts-list" class="posts-list">
            <!-- Posts will be dynamically inserted here -->
          </div>
        </div>

        <div id="posts-empty" class="posts-empty" style="display: none;">
          <h3>No posts yet</h3>
          <p>Create your first blog post to get started.</p>
          <button id="create-first-post-btn" class="create-first-post-btn">Create First Post</button>
        </div>
      </div>

      <!-- Discount Codes -->
      <div id="discounts-list-view" class="discounts-list-view section-view" data-section="discounts" style="display: none;">
        <div class="discounts-header">
          <h2>Discount Codes</h2>
          <div class="discounts-actions">
            <button id="generate-codes-btn" class="generate-codes-btn">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.4,12.3C17.135,12.3 17.7,11.74 17.7,11C17.7,10.26 17.135,9.7 16.4,9.7H14.7V8.2C14.7,7.645 14.255,7.2 13.7,7.2C13.145,7.2 12.7,7.645 12.7,8.2V9.7H10.9C10.165,9.7 9.6,10.26 9.6,11C9.6,11.74 10.165,12.3 10.9,12.3H12.7V13.8C12.7,14.355 13.145,14.8 13.7,14.8C14.255,14.8 14.7,14.355 14.7,13.8V12.3H16.4Z"/>
              </svg>
              Generate Codes
            </button>
          </div>
        </div>

        <div class="discounts-stats">
          <div id="active-codes-count" class="stat-card">
            <h3>Active Codes</h3>
            <span class="stat-number">0</span>
          </div>
          <div id="used-codes-count" class="stat-card">
            <h3>Used Codes</h3>
            <span class="stat-number">0</span>
          </div>
        </div>

        <div id="discounts-loading" class="discounts-loading">
          <div class="loading-spinner"></div>
          <p>Loading discount codes...</p>
        </div>

        <div id="discounts-table" class="discounts-table" style="display: none;">
          <div class="table-header">
            <div class="col-code">Code</div>
            <div class="col-created">Created</div>
            <div class="col-status">Status</div>
            <div class="col-actions">Actions</div>
          </div>
          <div id="discounts-list" class="discounts-list">
            <!-- Discount codes will be dynamically inserted here -->
          </div>
        </div>

        <div id="discounts-empty" class="discounts-empty" style="display: none;">
          <h3>No discount codes yet</h3>
          <p>Generate discount codes to allow customers to get free items.</p>
          <button id="create-first-codes-btn" class="create-first-codes-btn">Generate First Codes</button>
        </div>
      </div>

      <!-- Code Generation Modal -->
      <div id="generate-modal" class="generate-modal" style="display: none;">
        <div class="generate-overlay"></div>
        <div class="generate-content">
          <div class="generate-header">
            <h3>Generate Discount Codes</h3>
            <button id="close-generate" class="close-generate">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
              </svg>
            </button>
          </div>
          <form id="generate-form" class="generate-form">
            <div class="form-group">
              <label for="generate-count">Number of codes to generate</label>
              <input type="number" id="generate-count" name="count" value="5" min="1" max="50" required>
            </div>
            <div class="form-group">
              <label>Type</label>
              <p>Each code allows one free item per purchase (one-time use)</p>
            </div>
            <div class="generate-actions">
              <button type="button" id="cancel-generate" class="cancel-generate">Cancel</button>
              <button type="submit" class="confirm-generate">Generate Codes</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Delete Confirmation Modal -->
      <div id="delete-discount-modal" class="delete-modal" style="display: none;">
        <div class="delete-overlay"></div>
        <div class="delete-content">
          <div class="delete-header">
            <h3>Delete Discount Code</h3>
          </div>
          <div class="delete-body">
            <p>Are you sure you want to delete discount code <strong id="delete-code-name"></strong>?</p>
            <p class="delete-warning">This action cannot be undone.</p>
          </div>
          <div class="delete-actions">
            <button id="cancel-delete" class="cancel-delete">Cancel</button>
            <button id="confirm-delete" class="confirm-delete">Delete Code</button>
          </div>
        </div>
      </div>

      <!-- Post Editor -->
      <div id="post-editor-view" class="post-editor-view" style="display: none;">
        <div class="editor-header">
          <button id="back-to-posts" class="back-btn">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
            </svg>
            Back to Posts
          </button>
          <div class="editor-actions">
            <button id="preview-btn" class="preview-btn">Preview</button>
            <button id="save-draft-btn" class="save-draft-btn">Save Draft</button>
            <button id="publish-btn" class="publish-btn">Publish</button>
          </div>
        </div>

        <form id="post-form" class="post-form">
          <div class="form-row">
            <div class="form-group title-group">
              <label for="post-title">Title</label>
              <input type="text" id="post-title" name="title" required>
            </div>
            <div class="form-group author-group">
              <label for="post-author">Author</label>
              <input type="text" id="post-author" name="author" required>
            </div>
          </div>

          <div class="form-group">
            <label for="post-excerpt">Excerpt</label>
            <textarea id="post-excerpt" name="excerpt" rows="3" placeholder="Brief summary of the post..."></textarea>
          </div>

          <div class="form-group">
            <label for="post-image">Featured Image URL (optional)</label>
            <input type="url" id="post-image" name="featuredImage" placeholder="https://example.com/image.jpg">
          </div>

          <div class="form-group">
            <label for="post-tags">Tags (comma-separated)</label>
            <input type="text" id="post-tags" name="tags" placeholder="hope, inspiration, education">
          </div>

          <div class="form-group">
            <label for="post-content">Content</label>
            <div class="editor-mode-toggle">
              <button type="button" id="editor-mode-visual" class="mode-btn active">Visual</button>
              <button type="button" id="editor-mode-markdown" class="mode-btn">Markdown</button>
            </div>
            <div id="editor-container" class="toastui-editor-container"></div>
            <textarea id="post-content" name="content" style="display: none;"></textarea>
          </div>
        </form>
      </div>

      <!-- Preview Modal -->
      <div id="preview-modal" class="preview-modal" style="display: none;">
        <div class="preview-overlay"></div>
        <div class="preview-content">
          <div class="preview-header">
            <h3>Post Preview</h3>
            <button id="close-preview" class="close-preview">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
              </svg>
            </button>
          </div>
          <div id="preview-body" class="preview-body">
            <!-- Preview content will be inserted here -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="scripts/admin.js"></script>
</body>
</html>
